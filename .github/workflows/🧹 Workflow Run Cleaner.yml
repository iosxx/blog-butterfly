name: ğŸ§¹ è‡ªåŠ¨å…¨é‡æ¸…ç†å·¥ä½œæµå†å²

on:
  # æ¯æœˆ1æ—¥è‡ªåŠ¨æ‰§è¡Œå…¨é‡æ¸…ç†
  schedule:
    - cron: '0 0 1 * *'
  # æˆ–æ‰‹åŠ¨è§¦å‘ï¼ˆæ— éœ€ç¡®è®¤ï¼‰
  workflow_dispatch:

jobs:
  cleanup:
    runs-on: ubuntu-latest
    permissions:
      actions: write
    steps:
      - name: æ‰§è¡Œå…¨é‡æ¸…ç†
        uses: Mattraks/delete-workflow-runs@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          retain_days: 0           # åˆ é™¤æ‰€æœ‰æ—§äº0å¤©çš„è®°å½•ï¼ˆå³å…¨é‡åˆ é™¤ï¼‰
          keep_minimum_runs: 0     # ä¸ä¿ç•™ä»»ä½•è¿è¡Œè®°å½•
          delete_workflow_by_state_pattern: 'completed'  # ä»…åˆ é™¤å·²å®Œæˆçš„å·¥ä½œæµ
          dry_run: false           # ç›´æ¥æ‰§è¡Œåˆ é™¤æ“ä½œ
